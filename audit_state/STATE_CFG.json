{
  "env_map": {
    "engine": {
      "defaults": [
        "engine/config/defaults.py:22",
        "engine/config/defaults.py:48",
        "config.schema.json:6"
      ],
      "examples": [
        "config.example.env:3",
        "env.example:5"
      ],
      "overrides": [
        ".env:1",
        "docker-compose.yml:88"
      ],
      "secrets": [
        "compose.hardening.override.yaml:22"
      ]
    },
    "ops_api": {
      "defaults": [
        "config.example.env:24",
        "config.schema.json:83"
      ],
      "overrides": [
        ".env:94",
        "docker-compose.yml:182"
      ],
      "required": [
        "config.schema.json:115",
        "config.schema.json:127"
      ],
      "secrets": [
        "compose.hardening.override.yaml:4"
      ]
    },
    "observability": {
      "defaults": [
        "config.example.env:32",
        "config.schema.json:133"
      ],
      "overrides": [
        ".env:307",
        "ops/observability/docker-compose.observability.yml:31"
      ],
      "secrets": [
        "compose.hardening.override.yaml:15"
      ]
    },
    "ml_service": {
      "defaults": [
        "config.schema.json:168"
      ],
      "overrides": [
        "compose.ml.yml:12",
        "compose.autotrain.yml:27"
      ],
      "ledger": [
        "compose.autotrain.yml:29",
        "compose.autotrain.yml:49"
      ]
    },
    "data_ingester": {
      "defaults": [
        "config.schema.json:201"
      ],
      "overrides": [
        "compose.autotrain.yml:9",
        "compose.backfill.yml:10"
      ],
      "notes": "Shares ledger DB with ml_service; compose overlays set BATCH_LIMIT/SYMBOLS."
    },
    "param_controller": {
      "defaults": [
        "config.schema.json:234"
      ],
      "overrides": [
        "compose.autotrain.yml:64"
      ]
    },
    "dex_bridge": {
      "overrides": [
        ".env:220"
      ],
      "notes": "DEX_* variables only present in operator .env; keep private keys injected via external secret manager."
    }
  },
  "config_files": [
    {
      "path": "config/runtime.yaml",
      "purpose": "Risk budgets, symbol buckets, futures leverage",
      "notes": "Mounted into strategy_runtime via docker-compose.yml:133; governs governor + runtime services."
    },
    {
      "path": "config/universe.yaml",
      "purpose": "Universe service filters & tiers",
      "notes": "Supports universe service default filters and ties to ops/universe_state.json."
    },
    {
      "path": "config/screener.yaml",
      "purpose": "Screener thresholds and data sources",
      "notes": "Consumed by screener/service.py for auto scans."
    },
    {
      "path": "config/situations.json",
      "purpose": "Situational alerts definitions",
      "notes": "Ingested by situations/service.py for SSE stream."
    },
    {
      "path": "config/external_feeds.yaml",
      "purpose": "Webhook/feed credentials",
      "notes": "Controls external integrations used by ops notifications."
    },
    {
      "path": "ops/policies.yaml",
      "purpose": "Governance rules & kill-switches",
      "notes": "Loaded by ops/governance_daemon.py:61 and reloadable via POST /api/governance/reload."
    },
    {
      "path": "ops/policies.backup.yaml",
      "purpose": "Fallback copy for remote config",
      "notes": "Maintained by ops/policies tooling and referenced for disaster recovery."
    },
    {
      "path": "ops/observability/prometheus/prometheus.yml",
      "purpose": "Prometheus scrape config",
      "notes": "Enabled via docker-compose.observability overlay; sets scrape intervals for engine/ops."
    },
    {
      "path": "docker-compose.yml",
      "purpose": "Service env injection order",
      "notes": "Primary orchestrator, imports .env and pins safety overrides for engine/ops."
    },
    {
      "path": "config.example.env",
      "purpose": "Baseline compose defaults for safer local bring-up",
      "notes": "Documents required secrets and mounts; referenced by developers before populating .env."
    },
    {
      "path": "env.example",
      "purpose": "Strategy toggle quickstart for standalone scripts",
      "notes": "Only covers strategy knobs; operators must copy OPS/Grafana secrets from config.example.env."
    },
    {
      "path": ".env",
      "purpose": "Active compose overrides for local stack",
      "notes": "Used by docker compose env_file; includes live strategy bias and ops credentials placeholders."
    },
    {
      "path": "compose.hardening.override.yaml",
      "purpose": "Secret file mounts + read-only hardening",
      "notes": "Requires SECRETS_DIR; mounts OPS and Grafana secrets and overlays Binance API key files."
    },
    {
      "path": "compose.autotrain.yml",
      "purpose": "Autonomous ingestion→training→param controller overlay",
      "notes": "Sets shared ledger/env for data_ingester, ml_service, and param_controller."
    },
    {
      "path": "compose.ml.yml",
      "purpose": "Standalone ML service overlay",
      "notes": "Provides defaults for ml_service + scheduler when .env is absent."
    },
    {
      "path": "compose.backfill.yml",
      "purpose": "Historical backfill job overlay",
      "notes": "Reuses .env but pins START_TS/END_TS for batch ingestion."
    }
  ]
}
