
# Global dry-run safety defaults
DRY_RUN=1
OPS_API_TOKEN=dev-token
OPS_WORKERS=2

# Idempotency cache (optional Redis backend for multi-worker deployments)
IDEMPOTENCY_REDIS_URL=
IDEMPOTENCY_REDIS_TTL_SECONDS=86400

# Clock skew guard (compares container clock to remote reference)
CLOCK_SKEW_ENDPOINT=https://api.binance.com/api/v3/time
CLOCK_SKEW_THRESHOLD_MS=500

# ops/env.example

# -------- Venue & Network --------
BINANCE_ACCOUNT_TYPE=spot         # 'spot' or 'um_futures'
BINANCE_IS_TESTNET=true           # true for paper/testnet, false for live

# -------- API Keys --------
BINANCE_API_KEY=your_key_here
BINANCE_API_SECRET=your_secret_here

# -------- External Signals --------
EXTERNAL_EVENTS_SECRET=           # Optional shared secret for /events/external HMAC (sha256)

# -------- Strategy --------
SYMBOL=BTCUSDT.BINANCE            # or ETHUSDT-PERP.BINANCE for perps
QTY=0.001                         # tiny size
MAX_SPREAD_BP=2.5
COOLDOWN_MS=1500
MAX_DD_DAY_USD=-50
VWAP_ANCHOR_BPS=4.0
MIN_CONF=0.60

# -------- ML Service --------
HMM_URL=http://127.0.0.1:8010
RETRAIN_KLD_THRESHOLD=0.25
VOL_WINDOW_SECS=60

# -------- Margin Trading --------
MARGIN_ENABLED=false              # Enable Binance margin routing
MARGIN_MAX_LEVERAGE=3.0           # Max allowed effective leverage for margin fills
MARGIN_MIN_LEVEL=1.25             # Minimum acceptable margin level reported by venue
MARGIN_MAX_LIABILITY_USD=25000    # Cap outstanding borrow (USD equivalent)
BINANCE_MARGIN_ISOLATED=true      # Default to isolated margin orders
BINANCE_MARGIN_SIDE_EFFECT=AUTO_BORROW_REPAY
BINANCE_MARGIN_TAKER_BPS=12.0     # Override taker fee for margin if needed

# -------- Listing Sniper --------
LISTING_SNIPER_ENABLED=false
LISTING_SNIPER_DRY_RUN=true
LISTING_SNIPER_RISK_PCT=0.0075    # Fraction of equity risked per listing trade (0.75%)
LISTING_SNIPER_STOP_PCT=0.12      # Protective stop distance (12%)
LISTING_SNIPER_ENTRY_DELAY_SEC=8  # Seconds after go-live before submitting orders
LISTING_SNIPER_ENTRY_TIMEOUT_SEC=180
LISTING_SNIPER_MAX_SPREAD_PCT=0.06
LISTING_SNIPER_MAX_CHASE_PCT=0.45
LISTING_SNIPER_TP_LEVELS=50%,100%
LISTING_SNIPER_MAX_PARALLEL=2
LISTING_SNIPER_DEFAULT_MARKET=spot

# -------- Meme Sentiment --------
MEME_SENTIMENT_ENABLED=false
MEME_SENTIMENT_DRY_RUN=true
MEME_SENTIMENT_RISK_PCT=0.0075
MEME_SENTIMENT_STOP_PCT=0.10
MEME_SENTIMENT_TP_PCT=0.25
MEME_SENTIMENT_TRAIL_PCT=0.12
MEME_SENTIMENT_MIN_PRIORITY=0.82
MEME_SENTIMENT_MIN_SCORE=2.2
MEME_SENTIMENT_MIN_MENTIONS=18
MEME_SENTIMENT_MIN_VELOCITY=1.0
MEME_SENTIMENT_MAX_CHASE_PCT=0.55
MEME_SENTIMENT_MAX_SPREAD_PCT=0.035
MEME_SENTIMENT_COOLDOWN_SEC=1200
MEME_SENTIMENT_LOCK_SEC=600
MEME_SENTIMENT_DENY_KEYWORDS=rug,rugpull,scam,honeypot
MEME_SENTIMENT_SOURCES=twitter,discord
MEME_SENTIMENT_QUOTES=USDT,USDC,BUSD
MEME_SENTIMENT_DEFAULT_MARKET=spot
MEME_SENTIMENT_METRICS_ENABLED=true
MEME_SENTIMENT_PUBLISH_TOPIC=strategy.meme_sentiment_trade

# -------- Airdrop / Promo --------
AIRDROP_PROMO_ENABLED=false
AIRDROP_PROMO_DRY_RUN=true
AIRDROP_PROMO_RISK_PCT=0.004
AIRDROP_PROMO_MIN_PRIORITY=0.70
AIRDROP_PROMO_MIN_REWARD=8.0
AIRDROP_PROMO_MAX_SPREAD_PCT=0.04
AIRDROP_PROMO_COOLDOWN_SEC=7200
AIRDROP_PROMO_ALLOWED_SOURCES=binance_blog
AIRDROP_PROMO_DENY_KEYWORDS=scam,phishing

# -------- Trend Following --------
TREND_ENABLED=false
TREND_DRY_RUN=true
TREND_REFRESH_SEC=900
TREND_RISK_PCT=0.015
TREND_ALLOW_SHORTS=false
TREND_AUTO_TUNE_ENABLED=false

# -------- Scalping --------
SCALP_ENABLED=false
SCALP_DRY_RUN=true
SCALP_WINDOW_SEC=30
SCALP_MIN_RANGE_BPS=6
SCALP_STOP_BPS=12
SCALP_TP_BPS=18
SCALP_COOLDOWN_SEC=15
SCALP_ALLOW_SHORTS=true
SCALP_PREFER_FUTURES=true

# -------- Momentum Breakout --------
MOMENTUM_ENABLED=false
MOMENTUM_DRY_RUN=true
MOMENTUM_USE_SCANNER=true
MOMENTUM_MOVE_THRESHOLD_PCT=2.5
MOMENTUM_NOTIONAL_USD=150
MOMENTUM_COOLDOWN_SEC=600
MOMENTUM_PREFER_FUTURES=true

# -------- Momentum Realtime --------
MOMENTUM_RT_ENABLED=false
MOMENTUM_RT_DRY_RUN=true
MOMENTUM_RT_WINDOW_SEC=45
MOMENTUM_RT_MOVE_THRESHOLD_PCT=1.8
MOMENTUM_RT_QUOTE_USD=150
MOMENTUM_RT_ALLOW_SHORTS=false

# -------- Symbol Scanner --------
SYMBOL_SCANNER_ENABLED=false
SYMBOL_SCANNER_TOP_N=3
SYMBOL_SCANNER_MIN_VOLUME_USD=250000
SYMBOL_SCANNER_MIN_ATR_PCT=0.5
