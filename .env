# ==== ENGINE (shared) ====
TRADING_ENABLED=true
TRADE_SYMBOLS=BTCUSDT.BINANCE,ETHUSDT.BINANCE,BNBUSDT.BINANCE
MIN_NOTIONAL_USDT=5
# Loosen per-order cap to allow larger trades if signals fire
MAX_NOTIONAL_USDT=1000
# Allow higher throughput for strategy-driven orders
MAX_ORDERS_PER_MIN=120
DUST_THRESHOLD_USD=2
# Loosen exposure rails to avoid early blocking on small accounts
EXPOSURE_CAP_SYMBOL_USD=20000
EXPOSURE_CAP_TOTAL_USD=100000
# Relax venue error breaker so transient testnet/API hiccups don't pause trading
VENUE_ERROR_BREAKER_PCT=100
VENUE_ERROR_WINDOW_SEC=30

# ==== BINANCE ====
BINANCE_MODE=futures_demo
# Replace with your Spot Testnet keys from https://api.binance.com
BINANCE_API_KEY=BpElsEiIIIoTX62VAktaFBm2nQOkWV2e8kQ2q3ScixDtYE68P1j8sMSTRsfUHXxX
BINANCE_API_SECRET=XFcBxscu6eGM5anUCgAtW6QcKgO5bZCfYpLCRGv7kASiYHcJLvBMObo8Evbzbs7x
# Point all components at Futures base
BINANCE_FUTURES_BASE=https://fapi.binance.com
DEMO_FUTURES_BASE=https://fapi.binance.com

# ==== IBKR ====
IBKR_HOST=host.docker.internal
IBKR_PORT=7497
IBKR_CLIENT_ID=777
IBKR_FEE_MODE=per_share
IBKR_FEE_PER_SHARE=0.005
IBKR_MIN_TRADE_FEE_USD=1
IBKR_MIN_NOTIONAL_USD=5

# ==== OPS / DASH ====
# OPS serves the dashboard at /pnl_dashboard.html
OPS_PORT=8002
OPS_WORKERS=2
ENGINE_ENDPOINTS=http://engine_binance:8003,http://engine_bybit:8003,http://engine_ibkr:8003

# ==== METRICS ====
ENGINE_METRICS_PORT=9103
OPS_METRICS_PORT=9102

# ==== HTTP Defaults ====
BINANCE_RECV_WINDOW=5000
BINANCE_API_TIMEOUT=10
DEMO_USDM_BASE=https://testnet.binancefuture.com
DEMO_COINM_BASE=https://dapi.binance.com

# ==== BYBIT (placeholders for local dev) ====
BYBIT_API_KEY=dummy-local-key
BYBIT_API_SECRET=dummy-local-secret

# ==== EXECUTOR PACING (AGGRESSIVE anti-storm settings) ====
EXEC_INTERVAL_SEC=12
EXEC_JITTER=0.40
PROBE_COOLDOWN_SEC=45
MAX_PARALLEL_ORDERS=1
MAX_ORDERS_PER_MIN=3
RETRY_BASE_MS=600
RETRY_BACKOFF=2.0
RETRY_MAX_SEC=20

# ==== SYMBOL FEED (screener-driven breadth) ====
USE_SYMBOL_FEED=true
SYMBOL_FEED_URL=http://hmm_screener:8010/candidates
FALLBACK_SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT

# ==== PHYSICALLY BOUNDED EXECUTION (storms impossible) ====
# At most 5 symbols processed per round (expanded breadth, controlled pressure)
EXEC_SYMBOLS_PER_ROUND=5
# Circuit breaker: trip fast on 3 errors in 20s, cool down 3 min
EXEC_ERR_THRESHOLD=3
EXEC_ERR_WINDOW_SEC=20
EXEC_COOLDOWN_SEC=180

# ==== BINANCE BASE URLS (define to remove warnings) ====
BINANCE_SPOT_BASE=https://api.binance.com
DEMO_SPOT_BASE=https://api.binance.com

# ==== STRATEGY (light probe trading) ====
# Enable the built-in MA crossover strategy with tiny notionals
STRATEGY_ENABLED=true
STRATEGY_DRY_RUN=false
STRATEGY_SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT
STRATEGY_INTERVAL_SEC=30
STRATEGY_FAST=9
STRATEGY_SLOW=21
STRATEGY_QUOTE_USDT=25.0
SCREENER_AUTO_SCAN=true
SCREENER_SCAN_INTERVAL_SEC=45
SCREENER_SYMBOL_CAP=300
SCREENER_ROTATE=5
SCREENER_SCAN_JITTER=0.1

# ==== HMM guardrails (if using HMM policy) ====
# Lower confidence threshold and widen spread gate
MIN_CONF=0.50
MAX_SPREAD_BP=100.0
# Reduce global cooldown between flips to increase opportunities
COOLDOWN_MS=500
# Increase daily risk budget for HMM policy guardrails
DAY_RISK_USD=500
