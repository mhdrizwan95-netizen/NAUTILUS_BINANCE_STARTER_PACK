{"version":3,"file":"BacktestingTab-DcQg1K35.js","sources":["../../node_modules/lucide-react/dist/esm/icons/loader-circle.js","../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../node_modules/@radix-ui/react-progress/dist/index.mjs","../../src/components/ui/progress.tsx","../../src/lib/hooks.ts","../../src/components/tabs/BacktestingTab.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]];\nconst LoaderCircle = createLucideIcon(\"loader-circle\", __iconNode);\n\nexport { __iconNode, LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-react v0.487.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n];\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", __iconNode);\n\nexport { __iconNode, RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","\"use client\";\n\n// src/progress.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar PROGRESS_NAME = \"Progress\";\nvar DEFAULT_MAX = 100;\nvar [createProgressContext, createProgressScope] = createContextScope(PROGRESS_NAME);\nvar [ProgressProvider, useProgressContext] = createProgressContext(PROGRESS_NAME);\nvar Progress = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeProgress,\n      value: valueProp = null,\n      max: maxProp,\n      getValueLabel = defaultGetValueLabel,\n      ...progressProps\n    } = props;\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, \"Progress\"));\n    }\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, \"Progress\"));\n    }\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : void 0;\n    return /* @__PURE__ */ jsx(ProgressProvider, { scope: __scopeProgress, value, max, children: /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"aria-valuemax\": max,\n        \"aria-valuemin\": 0,\n        \"aria-valuenow\": isNumber(value) ? value : void 0,\n        \"aria-valuetext\": valueLabel,\n        role: \"progressbar\",\n        \"data-state\": getProgressState(value, max),\n        \"data-value\": value ?? void 0,\n        \"data-max\": max,\n        ...progressProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nProgress.displayName = PROGRESS_NAME;\nvar INDICATOR_NAME = \"ProgressIndicator\";\nvar ProgressIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeProgress, ...indicatorProps } = props;\n    const context = useProgressContext(INDICATOR_NAME, __scopeProgress);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": getProgressState(context.value, context.max),\n        \"data-value\": context.value ?? void 0,\n        \"data-max\": context.max,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nProgressIndicator.displayName = INDICATOR_NAME;\nfunction defaultGetValueLabel(value, max) {\n  return `${Math.round(value / max * 100)}%`;\n}\nfunction getProgressState(value, maxValue) {\n  return value == null ? \"indeterminate\" : value === maxValue ? \"complete\" : \"loading\";\n}\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction isValidMaxNumber(max) {\n  return isNumber(max) && !isNaN(max) && max > 0;\n}\nfunction isValidValueNumber(value, max) {\n  return isNumber(value) && !isNaN(value) && value <= max && value >= 0;\n}\nfunction getInvalidMaxError(propValue, componentName) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\nfunction getInvalidValueError(propValue, componentName) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\nvar Root = Progress;\nvar Indicator = ProgressIndicator;\nexport {\n  Indicator,\n  Progress,\n  ProgressIndicator,\n  Root,\n  createProgressScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress@1.1.2\";\n\nimport { cn } from \"./utils\";\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  );\n}\n\nexport { Progress };\n","import { useEffect, useRef, useState } from 'react';\n\nexport function usePolling<T>(fn: () => Promise<T>, ms: number, enabled = true) {\n  const [data, setData] = useState<T | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n  const timer = useRef<number | null>(null);\n\n  useEffect(() => {\n    if (!enabled) return undefined;\n    let cancelled = false;\n\n    const tick = async () => {\n      try {\n        const result = await fn();\n        if (!cancelled) setData(result);\n      } catch (err) {\n        if (!cancelled && err instanceof Error) {\n          setError(err);\n        }\n      } finally {\n        if (!cancelled) {\n          timer.current = window.setTimeout(tick, ms);\n        }\n      }\n    };\n\n    tick();\n\n    return () => {\n      cancelled = true;\n      if (timer.current) window.clearTimeout(timer.current);\n    };\n  }, [fn, ms, enabled]);\n\n  return { data, error };\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { DateRange } from 'react-day-picker';\nimport {\n  Calendar as CalendarIcon,\n  Filter,\n  Play,\n  RotateCcw,\n  Download,\n  Loader2,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { DynamicParamForm } from '@/components/forms/DynamicParamForm';\nimport { EquityCurves } from '@/components/charts/EquityCurves';\nimport { PnlBySymbol } from '@/components/charts/PnlBySymbol';\nimport { ReturnsHistogram } from '@/components/charts/ReturnsHistogram';\nimport { usePolling } from '@/lib/hooks';\nimport {\n  getStrategies,\n  pollBacktest,\n  startBacktest,\n} from '@/lib/api';\nimport type { StrategySummary } from '@/types/trading';\nimport { useAppStore } from '@/lib/store';\nimport { generateIdempotencyKey } from '@/lib/idempotency';\n\ntype BacktestPoll = Awaited<ReturnType<typeof pollBacktest>>;\n\nconst getDefaultRange = (): DateRange => {\n  const to = new Date();\n  const from = new Date();\n  from.setMonth(from.getMonth() - 1);\n  return { from, to };\n};\n\nfunction formatCurrency(value: number) {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    maximumFractionDigits: 2,\n  }).format(value);\n}\n\nexport function BacktestingTab() {\n  const [strategies, setStrategies] = useState<StrategySummary[]>([]);\n  const [selectedStrategyId, setSelectedStrategyId] = useState<string>('');\n  const [selectedSymbols, setSelectedSymbols] = useState<string[]>([]);\n  const [dateRange, setDateRange] = useState<DateRange | undefined>(() => getDefaultRange());\n  const [initialCapital, setInitialCapital] = useState(10000);\n  const [feeBps, setFeeBps] = useState(5);\n  const [slippageBps, setSlippageBps] = useState(2);\n  const [overrides, setOverrides] = useState<Record<string, unknown>>({});\n  const [jobId, setJobId] = useState<string | null>(null);\n  const [jobSnapshot, setJobSnapshot] = useState<BacktestPoll | null>(null);\n  const [submitting, setSubmitting] = useState(false);\n  const opsToken = useAppStore((state) => state.opsAuth.token);\n  const opsActor = useAppStore((state) => state.opsAuth.actor);\n  const opsApprover = useAppStore((state) => state.opsAuth.approver);\n\n  const selectedStrategy = useMemo(\n    () => strategies.find((strategy) => strategy.id === selectedStrategyId) ?? null,\n    [strategies, selectedStrategyId],\n  );\n\n  useEffect(() => {\n    const controller = new AbortController();\n    getStrategies(controller.signal)\n      .then((payload) => {\n        setStrategies(payload);\n        if (!selectedStrategyId && payload.length) {\n          setSelectedStrategyId(payload[0].id);\n          setSelectedSymbols(payload[0].symbols);\n          setOverrides(payload[0].params ?? {});\n        }\n      })\n      .catch((error) => {\n        if (!controller.signal.aborted && error instanceof Error) {\n          toast.error('Unable to load strategies', { description: error.message });\n        }\n      });\n    return () => controller.abort();\n  }, []);\n\n  useEffect(() => {\n    if (selectedStrategy) {\n      setSelectedSymbols(selectedStrategy.symbols);\n      setOverrides(selectedStrategy.params ?? {});\n    }\n  }, [selectedStrategy]);\n\n  const pollingFn = useCallback(() => {\n    if (!jobId) return Promise.resolve(null as BacktestPoll | null);\n    return pollBacktest(jobId);\n  }, [jobId]);\n\n  const { data: polledJob } = usePolling<BacktestPoll | null>(pollingFn, 1200, Boolean(jobId));\n\n  useEffect(() => {\n    if (polledJob) {\n      setJobSnapshot(polledJob);\n      if (polledJob.status === 'done') {\n        toast.success('Backtest completed', { description: 'Results ready below' });\n        setJobId(null);\n      } else if (polledJob.status === 'error') {\n        toast.error('Backtest failed');\n        setJobId(null);\n      }\n    }\n  }, [polledJob]);\n\n  const symbolOptions = useMemo(() => {\n    const symbols = new Set<string>();\n    strategies.forEach((strategy) => strategy.symbols.forEach((symbol) => symbols.add(symbol)));\n    return Array.from(symbols).sort();\n  }, [strategies]);\n\n  const pendingResult = jobSnapshot?.result;\n\n  const handleStart = async () => {\n    if (!opsToken.trim()) {\n      toast.error('Provide an OPS API token before launching a backtest');\n      return;\n    }\n    if (!opsApprover.trim()) {\n      toast.error('Provide an approver token before launching a backtest');\n      return;\n    }\n    if (!selectedStrategy) {\n      toast.error('Select a strategy');\n      return;\n    }\n    if (!dateRange?.from || !dateRange?.to) {\n      toast.error('Select a date range');\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      const response = await startBacktest(\n        {\n          strategyId: selectedStrategy.id,\n          params: overrides,\n          symbols: selectedSymbols,\n          startDate: dateRange.from.toISOString(),\n          endDate: dateRange.to.toISOString(),\n          initialCapital,\n          feeBps,\n          slippageBps,\n        },\n        {\n          token: opsToken.trim(),\n          actor: opsActor.trim() || undefined,\n          approverToken: opsApprover.trim() || undefined,\n          idempotencyKey: generateIdempotencyKey(`backtest-${selectedStrategy.id}`),\n        },\n      );\n      setJobId(response.jobId);\n      setJobSnapshot(null);\n      toast('Backtest started', { description: `Job ${response.jobId}` });\n    } catch (error) {\n      if (error instanceof Error) {\n        toast.error('Unable to start backtest', { description: error.message });\n      }\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleSymbolToggle = (symbol: string) => {\n    setSelectedSymbols((previous) =>\n      previous.includes(symbol)\n        ? previous.filter((item) => item !== symbol)\n        : [...previous, symbol],\n    );\n  };\n\n  const handleDownload = (type: 'csv' | 'json') => {\n    if (!pendingResult) return;\n    if (type === 'json') {\n      const blob = new Blob([JSON.stringify(pendingResult, null, 2)], {\n        type: 'application/json',\n      });\n      const url = URL.createObjectURL(blob);\n      const anchor = document.createElement('a');\n      anchor.href = url;\n      anchor.download = `backtest-${selectedStrategy?.name ?? 'result'}.json`;\n      anchor.click();\n      URL.revokeObjectURL(url);\n      return;\n    }\n\n    const trades = pendingResult.trades ?? [];\n    const header = 'time,symbol,side,qty,price,pnl';\n    const rows = trades.map((trade) =>\n      [trade.time, trade.symbol, trade.side, trade.qty, trade.price, trade.pnl ?? ''].join(','),\n    );\n    const blob = new Blob([`${header}\\n${rows.join('\\n')}`], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const anchor = document.createElement('a');\n    anchor.href = url;\n    anchor.download = `backtest-${selectedStrategy?.name ?? 'trades'}.csv`;\n    anchor.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div className=\"grid gap-6 lg:grid-cols-3\">\n        <Card className=\"space-y-4 p-4 lg:col-span-1\">\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs text-muted-foreground\">Strategy</Label>\n            <Select value={selectedStrategyId} onValueChange={setSelectedStrategyId}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select a strategy\" />\n              </SelectTrigger>\n              <SelectContent>\n                {strategies.map((strategy) => (\n                  <SelectItem key={strategy.id} value={strategy.id}>\n                    {strategy.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs text-muted-foreground\">Symbols</Label>\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\" className=\"flex w-full items-center justify-start gap-2\">\n                  <Filter className=\"h-4 w-4\" />\n                  {selectedSymbols.length ? `${selectedSymbols.length} selected` : 'All symbols'}\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-60 p-0\" align=\"start\">\n                <div className=\"max-h-64 space-y-2 overflow-y-auto p-3\">\n                  {symbolOptions.map((symbol) => (\n                    <label key={symbol} className=\"flex items-center gap-2 text-sm\">\n                      <Checkbox\n                        checked={selectedSymbols.includes(symbol)}\n                        onCheckedChange={() => handleSymbolToggle(symbol)}\n                      />\n                      <span>{symbol}</span>\n                    </label>\n                  ))}\n                  {symbolOptions.length === 0 && (\n                    <p className=\"text-xs text-muted-foreground\">No symbols available</p>\n                  )}\n                </div>\n              </PopoverContent>\n            </Popover>\n            <div className=\"flex flex-wrap gap-1 text-xs text-muted-foreground\">\n              {selectedSymbols.map((symbol) => (\n                <Badge key={symbol} variant=\"outline\">\n                  {symbol}\n                </Badge>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs text-muted-foreground\">Date Range</Label>\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\" className=\"flex w-full items-center justify-start gap-2\">\n                  <CalendarIcon className=\"h-4 w-4\" />\n                  {dateRange?.from && dateRange?.to\n                    ? `${dateRange.from.toLocaleDateString()} – ${dateRange.to.toLocaleDateString()}`\n                    : 'Select range'}\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent align=\"start\" className=\"p-0\">\n                <Calendar\n                  mode=\"range\"\n                  selected={dateRange}\n                  onSelect={setDateRange}\n                  numberOfMonths={2}\n                  initialFocus\n                />\n              </PopoverContent>\n            </Popover>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs text-muted-foreground\">Initial Capital</Label>\n              <Input\n                type=\"number\"\n                value={initialCapital}\n                onChange={(event) => setInitialCapital(Number(event.target.value) || 0)}\n                min={0}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs text-muted-foreground\">Fee (bps)</Label>\n              <Input\n                type=\"number\"\n                value={feeBps}\n                onChange={(event) => setFeeBps(Number(event.target.value) || 0)}\n                min={0}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs text-muted-foreground\">Slippage (bps)</Label>\n              <Input\n                type=\"number\"\n                value={slippageBps}\n                onChange={(event) => setSlippageBps(Number(event.target.value) || 0)}\n                min={0}\n              />\n            </div>\n          </div>\n\n          {selectedStrategy && (\n            <div className=\"rounded-lg border border-border p-3\">\n              <h4 className=\"mb-2 text-sm font-medium\">Parameters</h4>\n              <DynamicParamForm\n                key={selectedStrategy.id}\n                schema={selectedStrategy.paramsSchema}\n                initial={selectedStrategy.params}\n                submitLabel=\"Apply Overrides\"\n                onChange={setOverrides}\n                onSubmit={(values) => {\n                  setOverrides(values);\n                  toast('Overrides saved');\n                }}\n              />\n            </div>\n          )}\n\n          <div className=\"flex items-center gap-2 pt-2\">\n            <Button\n              className=\"flex-1\"\n              onClick={handleStart}\n              disabled={submitting || !selectedStrategy}\n            >\n              {submitting ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Play className=\"h-4 w-4\" />\n              )}\n              <span>{submitting ? 'Starting…' : 'Run Backtest'}</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() => {\n                setJobSnapshot(null);\n                setJobId(null);\n              }}\n            >\n              <RotateCcw className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </Card>\n\n        <div className=\"space-y-4 lg:col-span-2\">\n          <Card className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"font-medium\">Status</h3>\n                <p className=\"text-xs text-muted-foreground\">\n                  {jobSnapshot?.status ? jobSnapshot.status.toUpperCase() : jobId ? 'Polling…' : 'Idle'}\n                </p>\n              </div>\n              {jobSnapshot?.progress !== undefined && (\n                <Badge variant=\"outline\">{Math.round(jobSnapshot.progress * 100)}%</Badge>\n              )}\n            </div>\n            <div className=\"mt-4\">\n              <Progress value={(jobSnapshot?.progress ?? 0) * 100} />\n            </div>\n            {jobId && (\n              <p className=\"mt-2 text-xs text-muted-foreground\">Job: {jobId}</p>\n            )}\n          </Card>\n\n          {pendingResult && (\n            <>\n              <Card className=\"p-4\">\n                <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                  <h3 className=\"font-medium\">Summary</h3>\n                  <div className=\"flex gap-2\">\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => handleDownload('csv')}>\n                      <Download className=\"mr-2 h-4 w-4\" />Trades CSV\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => handleDownload('json')}>\n                      <Download className=\"mr-2 h-4 w-4\" />Full JSON\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"mt-4 grid grid-cols-2 gap-3 text-sm md:grid-cols-5\">\n                  <div>\n                    <span className=\"text-muted-foreground\">Total Return</span>\n                    <p>{(pendingResult.metrics.totalReturn * 100).toFixed(2)}%</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Sharpe</span>\n                    <p>{pendingResult.metrics.sharpe.toFixed(2)}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Max Drawdown</span>\n                    <p>{(pendingResult.metrics.maxDrawdown * 100).toFixed(2)}%</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Win Rate</span>\n                    <p>{(pendingResult.metrics.winRate * 100).toFixed(1)}%</p>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Trades</span>\n                    <p>{pendingResult.metrics.trades}</p>\n                  </div>\n                </div>\n              </Card>\n\n              <Card className=\"space-y-4 p-4\">\n                <h3 className=\"font-medium\">Equity Curve</h3>\n                <EquityCurves\n                  data={pendingResult.equityCurve.map((point) => ({\n                    t: point.t,\n                    [selectedStrategy?.name ?? 'Strategy']: point.equity,\n                  }))}\n                  series={[{ key: selectedStrategy?.name ?? 'Strategy', label: selectedStrategy?.name ?? 'Strategy' }]}\n                />\n              </Card>\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <Card className=\"space-y-4 p-4\">\n                  <h3 className=\"font-medium\">PnL by Symbol</h3>\n                  <PnlBySymbol data={pendingResult.pnlBySymbol} />\n                </Card>\n                <Card className=\"space-y-4 p-4\">\n                  <h3 className=\"font-medium\">Distribution of Returns</h3>\n                  <ReturnsHistogram returns={pendingResult.returns} />\n                </Card>\n              </div>\n\n              <Card className=\"p-4\">\n                <h3 className=\"mb-3 font-medium\">Trades</h3>\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Time</TableHead>\n                      <TableHead>Symbol</TableHead>\n                      <TableHead>Side</TableHead>\n                      <TableHead>Qty</TableHead>\n                      <TableHead>Price</TableHead>\n                      <TableHead className=\"text-right\">PnL</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {(pendingResult.trades ?? []).map((trade) => (\n                      <TableRow key={`${trade.time}-${trade.symbol}-${trade.price}`}>\n                        <TableCell>{new Date(trade.time).toLocaleString()}</TableCell>\n                        <TableCell>{trade.symbol}</TableCell>\n                        <TableCell className={trade.side === 'buy' ? 'text-emerald-400' : 'text-red-400'}>\n                          {trade.side.toUpperCase()}\n                        </TableCell>\n                        <TableCell>{trade.qty}</TableCell>\n                        <TableCell>{formatCurrency(trade.price)}</TableCell>\n                        <TableCell className=\"text-right\">\n                          {trade.pnl !== undefined ? formatCurrency(trade.pnl) : '—'}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </Card>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["__iconNode","LoaderCircle","createLucideIcon","RotateCcw","PROGRESS_NAME","DEFAULT_MAX","createProgressContext","createContextScope","ProgressProvider","useProgressContext","Progress","React.forwardRef","props","forwardedRef","__scopeProgress","valueProp","maxProp","getValueLabel","defaultGetValueLabel","progressProps","isValidMaxNumber","getInvalidMaxError","max","isValidValueNumber","getInvalidValueError","value","valueLabel","isNumber","jsx","Primitive","getProgressState","INDICATOR_NAME","ProgressIndicator","indicatorProps","context","maxValue","propValue","componentName","Root","Indicator","className","ProgressPrimitive.Root","cn","ProgressPrimitive.Indicator","usePolling","fn","ms","enabled","data","setData","useState","error","setError","timer","useRef","useEffect","cancelled","tick","result","err","getDefaultRange","to","from","formatCurrency","BacktestingTab","strategies","setStrategies","selectedStrategyId","setSelectedStrategyId","selectedSymbols","setSelectedSymbols","dateRange","setDateRange","initialCapital","setInitialCapital","feeBps","setFeeBps","slippageBps","setSlippageBps","overrides","setOverrides","jobId","setJobId","jobSnapshot","setJobSnapshot","submitting","setSubmitting","opsToken","useAppStore","state","opsActor","opsApprover","selectedStrategy","useMemo","strategy","controller","getStrategies","payload","toast","pollingFn","useCallback","pollBacktest","polledJob","symbolOptions","symbols","symbol","pendingResult","handleStart","response","startBacktest","generateIdempotencyKey","handleSymbolToggle","previous","item","handleDownload","type","blob","url","anchor","trades","header","rows","trade","jsxs","Card","Label","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Popover","PopoverTrigger","Button","Filter","PopoverContent","Checkbox","Badge","CalendarIcon","Calendar","Input","event","DynamicParamForm","values","Loader2","Play","Fragment","Download","EquityCurves","point","PnlBySymbol","ReturnsHistogram","Table","TableHeader","TableRow","TableHead","TableBody","TableCell"],"mappings":"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","x_google_ignoreList":[0,1,2]}