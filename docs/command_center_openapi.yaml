openapi: 3.0.3
info:
  title: Nautilus Command Center Control API
  version: 1.0.0
  description: Internal API exposed by ops/ui_api.py for manual overrides and governance
    actions. High-risk mutations require the single-operator OPS token plus Idempotency-Key
    headers; clients may request newer behaviours with X-API-Version.
servers:
- url: https://command-center.local/api
  description: Command Center (production)
- url: http://localhost:8002/api
  description: Local development
paths:
  /api/ops/ws-session:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Issue a short-lived WebSocket session token
      tags:
      - Session
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WsSessionResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      description: Requires X-Ops-Token. Returns session token used as query param
        for WebSocket subscriptions.
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
  /api/engine/status:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    get:
      summary: Return engine health summary
      tags:
      - Status
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/config/effective:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    get:
      summary: Return current effective runtime configuration
      tags:
      - Config
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/config:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    put:
      summary: Patch runtime configuration toggles
      tags:
      - Config
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfigPatch'
  /api/strategies/governance:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: List governance strategy registry
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StrategyGovernanceListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/strategies/{strategy_id}:
    patch:
      summary: Update strategy enabled flag or weights
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StrategyPatch'
    get:
      summary: Return a single strategy card with params
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security: []
  /api/universe/{strategy_id}:
    get:
      summary: Fetch symbols universe for strategy
      tags:
      - Universe
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security: []
  /api/universe/{strategy_id}/refresh:
    post:
      summary: Trigger refresh of strategy universe
      tags:
      - Universe
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
  /api/orders/open:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: List currently open orders
      tags:
      - Orders
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/orders/cancel:
    post:
      summary: Cancel multiple orders
      tags:
      - Orders
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelOrdersRequest'
  /api/positions/open:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: List open positions with PnL
      tags:
      - Positions
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PositionListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/risk/soft-breach/now:
    post:
      summary: Trigger soft breach risk handler immediately
      tags:
      - Risk
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
  /api/ops/kill-switch:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Toggle global trading kill-switch
      tags:
      - Ops
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KillSwitchRequest'
  /api/ops/flatten:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Flatten all open positions
      tags:
      - Ops
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FlattenRequest'
  /api/feeds/status:
    get:
      summary: Return status of ingest feeds
      tags:
      - Feeds
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security: []
  /api/feeds/announcements:
    patch:
      summary: Patch announcement feed settings
      tags:
      - Feeds
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedPatch'
  /api/feeds/meme:
    patch:
      summary: Patch meme feed settings
      tags:
      - Feeds
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeedPatch'
  /api/account/transfer:
    post:
      summary: Transfer funds between internal accounts
      tags:
      - Account
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferRequest'
  /api/events/trade:
    post:
      summary: Ingest executed trade event for broadcast
      tags:
      - Events
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TradeEvent'
  /api/strategies:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: Return Command Center strategy cards
      description: Returns a cursor-based envelope containing strategy cards, params schemas, and paging metadata.
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StrategyListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/strategies/{strategy_id}/start:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Enable a strategy and optionally update params
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StrategyStartRequest'
  /api/strategies/{strategy_id}/stop:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Disable a strategy
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
  /api/strategies/{strategy_id}/update:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Persist strategy params overrides
      tags:
      - Strategies
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StrategyUpdateRequest'
  /api/backtests:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    post:
      summary: Schedule a governance backtest job
      tags:
      - Backtests
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BacktestStartResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/IdempotencyKey'
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BacktestRequest'
  /api/backtests/{job_id}:
    get:
      summary: Poll backtest job status/result
      tags:
      - Backtests
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BacktestStatusResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/metrics/summary:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    get:
      summary: Return aggregated portfolio metrics and KPIs
      tags:
      - Metrics
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/metrics/models:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: Return model-level performance metrics with pagination
      tags:
      - Metrics
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetricsModelListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/positions:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: Return normalized positions list
      tags:
      - Positions
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PositionListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/trades/recent:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: Return recent trade feed
      tags:
      - Trades
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradeListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/alerts:
    parameters:
    - $ref: '#/components/parameters/ApiVersion'
    - $ref: '#/components/parameters/PageCursor'
    - $ref: '#/components/parameters/PageLimit'
    get:
      summary: Return recent alerts
      tags:
      - Alerts
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AlertListResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
    post:
      summary: Post alert into control feed
      tags:
      - Alerts
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenericResponse'
      security:
      - OpsToken: []
      parameters:
      - $ref: '#/components/parameters/OpsActor'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AlertRequest'
  /aggregate/health:
    get:
      summary: Aggregated venue health snapshot
      description: Returns per-venue health documents for each configured engine endpoint. Result set is bounded by engine count; pagination is not required.
      tags:
      - Aggregates
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregateHealthResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /aggregate/portfolio:
    get:
      summary: Consolidated portfolio across venues
      description: Combines venue portfolio snapshots with cached Command Center metrics. Response cardinality equals number of venues.
      tags:
      - Aggregates
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregatePortfolioResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /aggregate/exposure:
    get:
      summary: Unified exposure totals
      description: Returns total and per-symbol exposure compiled by the exposure collector. Dataset is constrained by actively tracked symbols.
      tags:
      - Aggregates
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregateExposureResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /aggregate/metrics:
    get:
      summary: Raw /metrics payloads per venue
      description: Streams each engine's Prometheus-formatted metrics text as parsed JSON. Dataset size equals engine count; pagination is not required.
      tags:
      - Aggregates
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregateMetricsResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /aggregate/pnl:
    get:
      summary: Venue PnL snapshot
      description: Returns realized and unrealized PnL keyed by venue from the PnL collector gauges. Data set size is equal to venue count and does not require pagination.
      tags:
      - Aggregates
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregatePnlResponse'
        default:
          $ref: '#/components/responses/ErrorResponse'
      security: []
  /api/health:
    get:
      summary: Return aggregated venue/engine health
      tags:
      - Status
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
      security: []
components:
  securitySchemes:
    OpsToken:
      type: apiKey
      in: header
      name: X-Ops-Token
  parameters:
    IdempotencyKey:
      name: Idempotency-Key
      in: header
      required: true
      schema:
        type: string
        minLength: 8
      description: Client-generated idempotency token (UUID recommended). Required
        for control mutations.
    ApiVersion:
      name: X-API-Version
      in: header
      required: false
      schema:
        type: string
        pattern: '^v[0-9]+$'
      description: Request explicit API behaviour (e.g. v1). Defaults to the latest supported minor version.
    PageCursor:
      name: cursor
      in: query
      required: false
      schema:
        type: string
      description: Opaque cursor for pagination.
    PageLimit:
      name: limit
      in: query
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 500
        default: 50
      description: Maximum number of results to return for paginated endpoints.
    OpsActor:
      name: X-Ops-Actor
      in: header
      required: false
      schema:
        type: string
      description: Human operator identity for audit logging.
  responses:
    ErrorResponse:
      description: Structured error payload
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  schemas:
    GenericResponse:
      type: object
      additionalProperties: true
    ErrorResponse:
      type: object
      properties:
        error:
          type: object
          required:
          - code
          - message
          properties:
            code:
              type: string
              example: auth.invalid_token
            message:
              type: string
              example: OPS token is invalid or expired
            details:
              type: object
              additionalProperties: true
            requestId:
              type: string
              description: Trace identifier for correlating server logs.
      required:
      - error
    WsSessionResponse:
      type: object
      properties:
        session:
          type: string
        expires:
          type: number
          format: unix-time
      required:
      - session
      - expires
    ConfigPatch:
      type: object
      properties:
        DRY_RUN:
          type: boolean
        SYMBOL_SCANNER_ENABLED:
          type: boolean
        SOFT_BREACH_ENABLED:
          type: boolean
        SOFT_BREACH_TIGHTEN_SL_PCT:
          type: number
        SOFT_BREACH_BREAKEVEN_OK:
          type: boolean
        SOFT_BREACH_CANCEL_ENTRIES:
          type: boolean
    StrategyPatch:
      type: object
      properties:
        enabled:
          type: boolean
        weights:
          type: object
          additionalProperties:
            type: number
    CancelOrdersRequest:
      type: object
      properties:
        orderIds:
          type: array
          items:
            type: string
          minItems: 1
      required:
      - orderIds
    KillSwitchRequest:
      type: object
      properties:
        enabled:
          type: boolean
        reason:
          type: string
      required:
      - enabled
    FlattenRequest:
      type: object
      properties:
        dryRun:
          type: boolean
          default: false
    FeedPatch:
      type: object
      additionalProperties: true
    TransferRequest:
      type: object
      properties:
        asset:
          type: string
        amount:
          type: number
        source:
          type: string
        target:
          type: string
      required:
      - asset
      - amount
      - source
      - target
    StrategyPerformance:
      type: object
      properties:
        pnl:
          type: number
        equitySeries:
          type: array
          items:
            type: object
            properties:
              t:
                type: string
              equity:
                type: number
            required:
            - t
            - equity
        winRate:
          type: number
        sharpe:
          type: number
        drawdown:
          type: number
      required:
      - pnl
    StrategySummary:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        kind:
          type: string
        status:
          type: string
          enum:
          - stopped
          - running
          - error
        symbols:
          type: array
          items:
            type: string
        paramsSchema:
          type: object
        params:
          type: object
          additionalProperties: true
        performance:
          $ref: '#/components/schemas/StrategyPerformance'
      required:
      - id
      - name
      - kind
      - status
      - symbols
      - paramsSchema
    PaginationMetadata:
      type: object
      properties:
        nextCursor:
          type: string
          nullable: true
        prevCursor:
          type: string
          nullable: true
        limit:
          type: integer
        totalHint:
          type: integer
          nullable: true
        hasMore:
          type: boolean
      required:
      - nextCursor
      - prevCursor
      - limit
    StrategyListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StrategySummary'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
      required:
      - data
      - page
    PositionSummary:
      type: object
      properties:
        id:
          type: string
        symbol:
          type: string
        qty:
          type: number
        entry:
          type: number
        mark:
          type: number
        pnl:
          type: number
      required:
      - id
      - symbol
      - qty
      - entry
      - mark
      - pnl
    TradeSummary:
      type: object
      properties:
        id:
          type: string
        time:
          type: integer
        timestamp:
          type: integer
        symbol:
          type: string
        side:
          type: string
          enum:
          - buy
          - sell
        quantity:
          type: number
        price:
          type: number
        pnl:
          type:
          - number
          - 'null'
      required:
      - id
      - time
      - timestamp
      - symbol
      - side
      - quantity
      - price
    AlertSummary:
      type: object
      properties:
        id:
          type: string
        time:
          type: integer
        timestamp:
          type: integer
        level:
          type: string
        type:
          type: string
        message:
          type: string
      required:
      - id
      - time
      - timestamp
      - type
      - message
    PositionListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PositionSummary'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
      required:
      - data
      - page
    TradeListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/TradeSummary'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
      required:
      - data
      - page
    AlertListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/AlertSummary'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
      required:
      - data
      - page
    OrderSummary:
      type: object
      properties:
        id:
          type: string
        symbol:
          type: string
        side:
          type: string
        type:
          type: string
        qty:
          type: number
        filled:
          type: number
        price:
          type: number
        status:
          type: string
        createdAt:
          type: integer
      required:
      - id
      - symbol
      - side
      - type
      - qty
      - filled
      - price
      - status
      - createdAt
    OrderListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/OrderSummary'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
      required:
      - data
      - page
    StrategyGovernanceEntry:
      type: object
      properties:
        id:
          type: string
        weight:
          type: number
        enabled:
          type: boolean
        is_current:
          type: boolean
      additionalProperties: true
      required:
      - id
      - weight
      - enabled
      - is_current
    StrategyGovernanceListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StrategyGovernanceEntry'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
        meta:
          type: object
          properties:
            current:
              type:
              - string
              - 'null'
            updatedAt:
              type:
              - number
              - 'null'
          additionalProperties: true
      required:
      - data
      - page
    MetricsModelSummary:
      type: object
      properties:
        id:
          type: string
        model:
          type: string
        venue:
          type: string
        ordersSubmitted:
          type: number
        ordersFilled:
          type: number
        trades:
          type: number
        pnlRealized:
          type: number
        pnlUnrealized:
          type: number
        totalPnl:
          type: number
        winRate:
          type: number
        returnPct:
          type: number
        sharpe:
          type: number
        drawdown:
          type: number
        maxDrawdown:
          type: number
        strategyType:
          type:
          - string
          - 'null'
        version:
          type:
          - string
          - 'null'
        tradingDays:
          type:
          - integer
          - 'null'
      required:
      - id
      - model
      - venue
      - ordersSubmitted
      - ordersFilled
      - trades
      - pnlRealized
      - pnlUnrealized
      - totalPnl
      - winRate
      - returnPct
      - sharpe
      - drawdown
      - maxDrawdown
    MetricsModelListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MetricsModelSummary'
        page:
          $ref: '#/components/schemas/PaginationMetadata'
        meta:
          type: object
          properties:
            metricsSource:
              type: string
            registryPath:
              type: string
            fetchedAt:
              type: number
            snapshotTimestamp:
              type:
              - number
              - 'null'
            records:
              type: integer
          additionalProperties: true
      required:
      - data
      - page
    TradeEvent:
      type: object
      properties:
        time:
          type: integer
        symbol:
          type: string
        side:
          type: string
          enum:
          - buy
          - sell
        qty:
          type: number
        price:
          type: number
        pnl:
          type:
          - number
          - 'null'
      required:
      - symbol
      - side
    StrategyStartRequest:
      type: object
      properties:
        params:
          type: object
          additionalProperties: true
    StrategyUpdateRequest:
      type: object
      properties:
        params:
          type: object
          additionalProperties: true
      required:
      - params
    BacktestRequest:
      type: object
      properties:
        strategyId:
          type: string
        config:
          type: object
          additionalProperties: true
      required:
      - strategyId
    BacktestStartResponse:
      type: object
      properties:
        ok:
          type: boolean
        jobId:
          type: string
      required:
      - ok
      - jobId
    BacktestStatusResponse:
      type: object
      properties:
        status:
          type: string
        progress:
          type: number
        result:
          type: object
      required:
      - status
      - progress
        required:
        - time
        - level
        - text
    AlertRequest:
      type: object
      properties:
        time:
          type: integer
        level:
          type: string
        text:
          type: string
      required:
      - level
      - text
    HealthResponse:
      type: object
      properties:
        venues:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              status:
                type: string
              latencyMs:
                type: number
              queue:
                type: integer
            required:
            - name
            - status
      required:
      - venues
    AggregateHealthResponse:
      $ref: '#/components/schemas/HealthResponse'
    AggregatePortfolioResponse:
      type: object
      properties:
        total_equity_usd:
          type: number
        venues:
          type: array
          items:
            type: object
            additionalProperties: true
        count:
          type: integer
        equity_usd:
          type: number
        cash_usd:
          type: number
        gain_usd:
          type: number
        return_pct:
          type: number
        baseline_equity_usd:
          type: number
        last_refresh_epoch:
          type:
          - number
          - 'null'
      required:
      - total_equity_usd
      - venues
      - count
    AggregateExposureResponse:
      type: object
      properties:
        totals:
          type: object
          additionalProperties:
            type: number
        by_symbol:
          type: object
          additionalProperties:
            type: object
            additionalProperties:
              type: number
      required:
      - totals
      - by_symbol
    AggregateMetricsResponse:
      type: object
      properties:
        venues:
          type: array
          items:
            type: object
            additionalProperties: true
      required:
      - venues
    AggregatePnlResponse:
      type: object
      properties:
        realized:
          type: object
          additionalProperties:
            type: number
        unrealized:
          type: object
          additionalProperties:
            type: number
      required:
      - realized
      - unrealized
