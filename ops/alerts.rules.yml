groups:
- name: hmm-alerts
  rules:
  - alert: KillSwitchOn
    expr: state_active == 0 and absent_over_time(state_active[2m]) == 0
    for: 2m
    annotations: { description: "Strategy appears inactive (possible kill switch or stall)." }

  - alert: DriftHigh
    expr: drift_score > 0.5
    for: 5m
    annotations: { description: "Feature drift sustained above threshold." }

  - alert: GuardrailStorm
    expr: sum(rate(guardrail_trigger_total[5m])) > 30
    for: 2m
    annotations: { description: "Guardrails triggering excessively." }
