global:
  scrape_interval: 5s
  evaluation_interval: 15s

alerting:
  alertmanagers:
  - static_configs:
    - targets: ["alertmanager:9093"]

rule_files:
  - rules/trading.rules.yml
  - rules/alerts.rules.yml
  - rules/binance_alerts.yml
  - rules/trading.yml   # your existing rules

scrape_configs:
- job_name: engines
  scrape_interval: 15s
  scrape_timeout: 10s
  static_configs:
  - targets:
      - engine_binance:8003
    labels:
      role: trader
      venue: binance
  - targets:
      - engine_binance_exporter:8003
    labels:
      role: exporter
      venue: binance
  - targets:
      - engine_ibkr:8003
    labels:
      role: trader
      venue: ibkr
  - targets:
      - engine_kraken:8003
    labels:
      role: trader
      venue: kraken
  - targets:
      - engine_kraken_exporter:8003
    labels:
      role: exporter
      venue: kraken
  relabel_configs:
  - source_labels: [__address__]
    regex: '([^:]+)(?::\d+)?'
    target_label: job
    replacement: '$1'
