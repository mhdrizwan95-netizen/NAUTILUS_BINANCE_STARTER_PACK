global:
  scrape_interval: 5s
  evaluation_interval: 5s

rule_files:
  - /etc/prometheus/rules/*.yml

scrape_configs:
  - job_name: "ops"
    static_configs:
      - targets: ["hmm_ops:8002"]

  - job_name: "engine_binance"
    static_configs:
      - targets: ["engine_binance:8003"]

  - job_name: "engine_bybit"
    static_configs:
      - targets: ["engine_bybit:8003"]

  - job_name: "engine_ibkr"
    static_configs:
      - targets: ["engine_ibkr:8003"]

  # ml_service is optional; comment out to avoid DOWN target unless you run it
  # - job_name: "ml_service"
  #   static_configs:
  #     - targets: ["ml_service:8010"]

  - job_name: "situations"
    static_configs:
      - targets: ["hmm_situations:8011"]

  - job_name: "universe"
    static_configs:
      - targets: ["hmm_universe:8009"]

  - job_name: "screener"
    static_configs:
      - targets: ["hmm_screener:8010"]

  - job_name: "executor"
    static_configs:
      # Prefer service name over container_name for stable DNS within the compose network
      - targets: ["executor:9102"]
